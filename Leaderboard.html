<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Leaderboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,600;1,600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: black;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 90vh;
            margin: 0;
            padding: 40px 0px 0px 0px; /* Reduced side padding */
            position: relative;
        }
        
        .container {
            display: flex;
            width: 90%;
            justify-content: space-between;
            gap: 100px; /* Increased from 50px to 60px */
        }
        
        .team {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .team-header {
            font-size: 1.5rem;
            padding: 8px 14px;
            text-align: left;
            border-radius: 4px;
            margin-bottom: 12px;
        }
        
        .red {
            background-color: #cc0000;
        }
        
        .blue {
            background-color: #0000cc;
        }
        
        .scores {
            display: flex;
            justify-content: space-between;
            position: relative;
            padding: 2px; /* Add padding for spacing */
            background-color: transparent;
        }

        .score-background {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 0;
            border-radius: 4px; /* Match corner radii with team name box */
        }

        .red-background {
            background-color: #cc0000;
        }

        .blue-background {
            background-color: #0000cc;
        }

        .score-box {
            flex: 1;
            height: 30px;
            text-align: center;
            padding: 10px;
            font-size: 1.5rem;
            background-color: black; /* Black fill for individual boxes */
            color: white; /* White text */
            margin: 1px 1px; /* Consistent spacing between boxes */
            z-index: 1; /* Ensure boxes are above the background */
            border-radius: 0px; /* Match corner radii with team name box */
        }
        
        .red-border {
            border-color: #cc0000;
        }
        
        .blue-border {
            border-color: #0000cc;
        }
        
        .add-score {
            cursor: pointer;
            z-index: 1; /* Ensure add button is above the background */
        }
        
        .total-section {
            display: flex;
            justify-content: space-between;
            width: 90%;
            margin-top: 30px; /* Reduced from 50px to 30px */
            gap: 100px;
        }
        
        .team-total {
            display: flex;
            flex-direction: row;
            align-items: flex-end;
            flex: 1;
            height: 150px;
            position: relative;
        }
        
        .round-count {
            font-size: 1.2rem;
            align-self: flex-end;
            text-align: left;
            margin-bottom: 8px; /* Add bottom margin */
            white-space: nowrap;
        }
        
        .total-score {
            font-size: 10rem;
            font-weight: bold;
            margin-left: auto;
            line-height: 1;
            margin-bottom: 0; /* Remove bottom margin */
            font-family: 'Montserrat', sans-serif; /* Apply Montserrat font */
        }
        
        .connecting-line {
            height: 1px; /* Reduce thickness */
            background-color: rgb(137, 137, 137);
            flex-grow: 1;
            margin: 0 15px 15px 15px; /* Add bottom margin */
            align-self: flex-end;
        }
        
        .score-input {
            width: 100%;
            height: 100%;
            background: transparent;
            border: none;
            color: white;
            font-size: 1.5rem;
            text-align: center;
            outline: none;
        }

        /* Hide increment/decrement buttons for WebKit browsers */
        .score-input::-webkit-inner-spin-button,
        .score-input::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        .reset-link {
            position: absolute;
            bottom: 10px;
            right: 10px;
            color: #666;
            text-decoration: none;
            font-size: 0.9rem;
        }
        
        .reset-link:hover {
            text-decoration: underline;
        }
        
        .score-box:not(.add-score) {
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="team" id="team-red">
            <div class="team-header red">Team Red</div>
            <div class="scores" id="red-scores">
                <div class="score-background red-background"></div> <!-- Red background -->
                <div class="score-box red-border add-score" id="red-add">
                    <span>+</span>
                </div>
            </div>
        </div>
        <div class="team" id="team-blue">
            <div class="team-header blue">Team Blue</div>
            <div class="scores" id="blue-scores">
                <div class="score-background blue-background"></div> <!-- Blue background -->
                <div class="score-box blue-border add-score" id="blue-add">
                    <span>+</span>
                </div>
            </div>
        </div>
    </div>
    <div class="total-section">
        <div class="team-total">
            <div class="round-count" id="red-rounds">0 rounds</div>
            <div class="connecting-line"></div>
            <div class="total-score" id="red-total">0</div>
        </div>
        <div class="team-total">
            <div class="round-count" id="blue-rounds">0 rounds</div>
            <div class="connecting-line"></div>
            <div class="total-score" id="blue-total">0</div>
        </div>
    </div>
    
    <a href="#" class="reset-link" id="reset-button">RESET</a>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let redScores = [];
            let blueScores = [];
            
            // Red team score addition
            document.getElementById('red-add').addEventListener('click', function() {
                addScoreInput('red');
            });
            
            // Blue team score addition
            document.getElementById('blue-add').addEventListener('click', function() {
                addScoreInput('blue');
            });
            
            // Reset button
            document.getElementById('reset-button').addEventListener('click', function(e) {
                e.preventDefault();
                resetScores();
            });
            
            function addScoreInput(team) {
                const addButton = document.getElementById(`${team}-add`);
                const span = addButton.querySelector('span');
                const input = document.createElement('input');
                input.type = 'number';
                input.className = 'score-input';
                input.min = 0;
                input.max = 999;
                
                addButton.replaceChild(input, span);
                input.focus();
                
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const score = parseInt(input.value, 10);
                        if (!isNaN(score)) {
                            addScore(team, score);
                            updateTotals(team);
                            addButton.innerHTML = '<span>+</span>';
                            addButton.addEventListener('click', function() {
                                addScoreInput(team);
                            });
                        }
                    }
                });
                
                input.addEventListener('blur', function() {
                    addButton.innerHTML = '<span>+</span>';
                    addButton.addEventListener('click', function() {
                        addScoreInput(team);
                    });
                });
            }
            
            function addScore(team, score, index = -1) {
                const scoresDiv = document.getElementById(`${team}-scores`);
                const addButton = document.getElementById(`${team}-add`);
                
                // Create new score box
                const scoreBox = document.createElement('div');
                scoreBox.className = `score-box ${team}-border`;
                scoreBox.textContent = score;
                
                // Add click event to edit
                scoreBox.addEventListener('click', function() {
                    const scoreIndex = Array.from(scoresDiv.children).indexOf(this);
                    editScore(team, scoreIndex);
                });
                
                // Check if we're updating an existing score or adding a new one
                if (index >= 0) {
                    // Update existing score in the array
                    if (team === 'red') {
                        redScores[index] = score;
                    } else {
                        blueScores[index] = score;
                    }
                    
                    // Replace the existing score box in the DOM
                    const existingScoreBox = scoresDiv.children[index];
                    scoresDiv.replaceChild(scoreBox, existingScoreBox);
                } else {
                    // Add new score to array
                    if (team === 'red') {
                        redScores.push(score);
                    } else {
                        blueScores.push(score);
                    }
                    
                    // Insert before the add button
                    scoresDiv.insertBefore(scoreBox, addButton);
                }
            }
            
            function editScore(team, index) {
                const scoresDiv = document.getElementById(`${team}-scores`);
                const scoreBox = scoresDiv.children[index];
                const currentScore = team === 'red' ? redScores[index] : blueScores[index];
                
                // Create input element
                const input = document.createElement('input');
                input.type = 'number';
                input.className = 'score-input';
                input.value = currentScore;
                input.min = 0;
                input.max = 999;
                
                // Replace score text with input
                scoreBox.textContent = '';
                scoreBox.appendChild(input);
                input.focus();
                
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const newScore = parseInt(input.value, 10);
                        if (!isNaN(newScore)) {
                            addScore(team, newScore, index);
                            updateTotals(team);
                        }
                    }
                });
                
                input.addEventListener('blur', function() {
                    scoreBox.textContent = currentScore;
                });
            }
            
            function updateTotals(team) {
                const scores = team === 'red' ? redScores : blueScores;
                const total = scores.reduce((sum, score) => sum + score, 0);
                const roundCount = scores.length;
                
                document.getElementById(`${team}-total`).textContent = total;
                document.getElementById(`${team}-rounds`).textContent = `${roundCount} rounds`;
            }
            
            function resetScores() {
                // Clear arrays
                redScores = [];
                blueScores = [];
                
                // Reset DOM
                const redScoresDiv = document.getElementById('red-scores');
                const blueScoresDiv = document.getElementById('blue-scores');
                
                // Remove all score boxes except the add button
                while (redScoresDiv.children.length > 1) {
                    redScoresDiv.removeChild(redScoresDiv.firstChild);
                }
                
                while (blueScoresDiv.children.length > 1) {
                    blueScoresDiv.removeChild(blueScoresDiv.firstChild);
                }
                
                // Reset totals
                document.getElementById('red-total').textContent = '0';
                document.getElementById('blue-total').textContent = '0';
                document.getElementById('red-rounds').textContent = '0 rounds';
                document.getElementById('blue-rounds').textContent = '0 rounds';
            }
        });
    </script>
</body>
</html>